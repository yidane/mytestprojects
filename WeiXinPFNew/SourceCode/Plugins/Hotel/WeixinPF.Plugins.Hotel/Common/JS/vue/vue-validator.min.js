/*!
 * vue-validator v2.0.0-alpha.8
 * (c) 2015 kazuya kawaguchi
 * Released under the MIT License.
 */
!function(i,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):i.VueValidator=t()}(this,function(){"use strict";function i(i,t){window.console&&(console.warn("[vue-validator] "+i),t&&console.warn(t.stack))}function t(i){if(null===i)return!0;if(Array.isArray(i)){if(i.length>0)return!1;if(0===i.length)return!0}else if(g.Vue.util.isPlainObject(i))for(var t in i)if(g.Vue.util.hasOwn(i,t))return!1;return!0}function e(i,t,e){if(Array.isArray(i))for(var a=0;a<i.length;a++)t.call(e||i[a],i[a],a);else if(g.Vue.util.isPlainObject(i)){var n=g.Vue.util.hasOwn;for(var r in i)n(i,r)&&t.call(e||i[r],i[r],r)}}function a(i,t){var e=g.Vue.util.indexOf(i,t);return~e?i.splice(e,1):null}function n(i,t){var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),i.dispatchEvent(e)}function r(i){return Array.isArray(i)?i.length>0:"number"==typeof i||"function"==typeof i?!0:"boolean"==typeof i?i:"string"==typeof i?i.length>0:null!==i&&"object"===("undefined"==typeof i?"undefined":y["typeof"](i))?Object.keys(i).length>0:null===i||void 0===i?!1:void 0}function s(i,t){if("string"!=typeof t)return!1;var e=t.match(new RegExp("^/(.*?)/([gimy]*)$"));return e?new RegExp(e[1],e[2]).test(i):!1}function o(i,t){return"string"==typeof i&&h(t,10)&&i.length>=parseInt(t,10)}function l(i,t){return"string"==typeof i&&h(t,10)&&i.length<=parseInt(t,10)}function u(i,t){return!isNaN(+i)&&!isNaN(+t)&&+i>=+t}function d(i,t){return!isNaN(+i)&&!isNaN(+t)&&+t>=+i}function h(i){return/^(-?[1-9]\d*|0)$/.test(i)}function v(i){i.config._assetTypes.push("validator");var t=Object.create(null);i.util.extend(t,_),i.options.validators=t;var e=i.config.optionMergeStrategies;e&&(e.validators=e.methods),i.validator=function(t,e){return e?void(i.options.validators[t]=e):i.options.validators[t]}}function c(i){var t=i.prototype._init;i.prototype._init=function(i){this._validatorMaps||(this._validatorMaps=Object.create(null)),t.call(this,i)};var e=i.prototype._destroy;i.prototype._destroy=function(){e.apply(this,arguments),this._validatorMaps=null}}function f(t){var a=t.util;t.directive("validate",{params:["group"],bind:function(){var t=this.vm,e=t.$options._validator;if(!e)return void i("TODO: should be implemented error message");var n=this.validator=this.vm._validatorMaps[e],r=this.validation=new b(this);n.addValidation(r),this.params.group&&n.addGroupValidation(this.params.group,r),this.on("blur",a.bind(this.validation.listener,this.validation)),this.on("input",a.bind(this.validation.listener,this.validation))},update:function(i,t){i&&(a.isPlainObject(i)?this.handleObject(i):Array.isArray(i)&&this.handleArray(i),this.validator.validate(this.validation))},handleArray:function(i){var t=this;e(i,function(i){t.validation.setValidation(i)},this)},handleObject:function(i){var t=this;e(i,function(i,e){if(a.isPlainObject(i)){if("rule"in i){var n="message"in i?i.message:null;t.validation.setValidation(e,i.rule,n)}}else t.validation.setValidation(e,i)},this)},unbind:function(){this.validator&&this.validation&&(this.params.group&&this.validator.removeGroupValidation(this.params.group,this.validation),this.validator.removeValidation(this.validation),this.validator=null,this.validation=null)}})}function p(t){var e=t.util,a=t.FragmentFactory,n=t.directive("if"),r=t.util.bind;t.elementDirective("validator",{params:["name","groups","lazy"],bind:function(){var t=this;if(!this.params.name)return void i("TODO: should be implemented validator:bind name params nothing error");var a=this.validatorName="$"+this.params.name;if(!this.vm._validatorMaps)return void i("TODO: should be implemented error message");var n=[];this.params.groups&&(e.isArray(this.params.groups)?n=this.params.groups:e.isPlainObject(this.params.groups)||"string"!=typeof this.params.groups||n.push(this.params.groups));var s=this.validator=new V(a,this,n);s.enableReactive(),s.setupScope(),s.waitFor(r(function(){t.render(s,a),s.validate()},this)),this.params.lazy||this.vm.$activateValidator()},render:function(i,t){this.anchor=e.createAnchor("vue-validator"),e.replace(this.el,this.anchor),this.insert(t)},insert:function(i){e.extend(this.vm.$options,{_validator:i}),this.factory=new a(this.vm,this.el.innerHTML),n.insert.call(this)},unbind:function(){n.unbind.call(this),this.validator.disableReactive(),this.validatorName&&(this.validatorName=null,this.validator=null)}})}function m(t){arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return m.installed?void i("already installed."):(g.Vue=t,v(t),c(t),p(t),void f(t))}var y={};y["typeof"]=function(i){return i&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i},y.classCallCheck=function(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")},y.createClass=function(){function i(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}}();var g={},_=Object.freeze({required:r,pattern:s,minlength:o,maxlength:l,min:u,max:d}),b=function(){function i(t){y.classCallCheck(this,i);var e=g.Vue.util.camelize;this.model=e(t.arg),this.el=t.el,this.dir=t,this.init=t.el.value,this.touched=!1,this.dirty=!1,this.modified=!1,this.validators=Object.create(null)}return y.createClass(i,[{key:"setValidation",value:function(i,t,e){var a=this.validators[i];a||(a=this.validators[i]={},a.name=i),a.arg=t,e&&(a.msg=e)}},{key:"listener",value:function(i){(!i.relatedTarget||"A"!==i.relatedTarget.tagName&&"BUTTON"!==i.relatedTarget.tagName)&&("blur"===i.type&&(this.touched=!0),this.dirty||this.el.value===this.init||(this.dirty=!0),this.modified=this.el.value!==this.init,this.dir.validator.validate())}},{key:"validate",value:function(){var i=this,a=g.Vue.util.extend,r=Object.create(null),s=Object.create(null),o=!0;e(this.validators,function(t,e){var a=i._resolveValidator(e),n=a.call(i.dir.vm,i.el.value,t.arg);if(!n){o=!1;var l=t.msg;l&&(s[e]="function"==typeof l?l():l)}r[e]=!n},this),n(this.el,o?"valid":"invalid");var l={valid:o,invalid:!o,touched:this.touched,untouched:!this.touched,dirty:this.dirty,pristine:!this.dirty,modified:this.modified};return t(s)||(l.messages=s),a(r,l),r}},{key:"_resolveValidator",value:function(i){var t=g.Vue.util.resolveAsset;return t(this.dir.vm.$options,"validators",i)}}]),i}(),V=function(){function i(t,a,n){var r=this;y.classCallCheck(this,i),this.name=t,this.scope=Object.create(null),this._dir=a,this._validations=[],this._groups=n,this._groupValidations=Object.create(null),e(n,function(i){r._groupValidations[i]=[]},this)}return y.createClass(i,[{key:"enableReactive",value:function(){g.Vue.util.defineReactive(this._dir.vm,this.name,this.scope),this._dir.vm._validatorMaps[this.name]=this}},{key:"disableReactive",value:function(){this._dir.vm._validatorMaps[this.name]=null,this._dir.vm[this.name]=null}},{key:"addValidation",value:function(i){this._validations.push(i)}},{key:"removeValidation",value:function(i){g.Vue.util.del(this.scope,i.model),a(this._validations,i)}},{key:"addGroupValidation",value:function(i,t){var e=this._groupValidations[i];e&&e.push(t)}},{key:"removeGroupValidation",value:function(i,t){var e=this._groupValidations[i];e&&a(e,t)}},{key:"validate",value:function(i){var t=this;e(this._validations,function(i,e){var a=i.validate();g.Vue.util.set(t.scope,i.model,a)},this)}},{key:"setupScope",value:function(){var i=this;this._defineProperties(this._validations,this.scope),e(this._groups,function(t){var e=i._groupValidations[t],a=Object.create(null);g.Vue.util.set(i.scope,t,a),i._defineProperties(e,a)},this)}},{key:"waitFor",value:function(i){var t=this._dir.vm,e="$activateValidator";this._dir.vm[e]=function(){i(),t[e]=null}}},{key:"_defineProperties",value:function(i,t){var a=this,n=g.Vue.util.bind;e({valid:{fn:this._defineValid,arg:i},invalid:{fn:this._defineInvalid,arg:t},touched:{fn:this._defineTouched,arg:i},untouched:{fn:this._defineUntouched,arg:t},modified:{fn:this._defineModified,arg:i},dirty:{fn:this._defineDirty,arg:i},pristine:{fn:this._definePristine,arg:t},messages:{fn:this._defineMessages,arg:i}},function(i,e){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return n(i.fn,a)(i.arg)}})},this)}},{key:"_walkValidations",value:function(i,t,a){var n=this,r=g.Vue.util.hasOwn,s=a;return e(i,function(i,e){if(s!==!a&&r(n.scope,i.model)){var o=n.scope[i.model];o&&o[t]===!a&&(s=!a)}},this),s}},{key:"_defineValid",value:function(i){return this._walkValidations(i,"valid",!0)}},{key:"_defineInvalid",value:function(i){return!i.valid}},{key:"_defineTouched",value:function(i){return this._walkValidations(i,"touched",!1)}},{key:"_defineUntouched",value:function(i){return!i.touched}},{key:"_defineModified",value:function(i){return this._walkValidations(i,"modified",!1)}},{key:"_defineDirty",value:function(i){return this._walkValidations(i,"dirty",!1)}},{key:"_definePristine",value:function(i){return!i.dirty}},{key:"_defineMessages",value:function(i){var a=this,n=g.Vue.util.extend,r=g.Vue.util.hasOwn,s=Object.create(null);return e(i,function(i,e){if(r(a.scope,i.model)){var o=a.scope[i.model];o&&!t(o.messages)&&(s[i.model]=n(Object.create(null),o.messages))}},this),t(s)?void 0:s}}]),i}();return m.version="2.0.0-alpha.8","undefined"!=typeof window&&window.Vue&&window.Vue.use(m),m});